<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>semanticwfs: TripleStoreConnector Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">semanticwfs
   &#160;<span id="projectnumber">Version 0.1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00371.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="#pac-static-methods">Static Package Functions</a> &#124;
<a href="#pac-static-attribs">Static Package Attributes</a> &#124;
<a href="a00368.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">TripleStoreConnector Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for TripleStoreConnector:</div>
<div class="dyncontent">
<div class="center"><img src="a00369.png" border="0" usemap="#TripleStoreConnector_coll__map" alt="Collaboration graph"/></div>
<map name="TripleStoreConnector_coll__map" id="TripleStoreConnector_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a723f01dec66e801f28fd03351a36c0ad"><td class="memItemLeft" align="right" valign="top">static Double []&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#a723f01dec66e801f28fd03351a36c0ad">getBoundingBoxFromTripleStoreData</a> (String triplestore, String queryString)</td></tr>
<tr class="separator:a723f01dec66e801f28fd03351a36c0ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b260eecbaabcef8473fd87ada040682"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#a8b260eecbaabcef8473fd87ada040682">main</a> (String[] args)</td></tr>
<tr class="separator:a8b260eecbaabcef8473fd87ada040682"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5df71c9c4e3fecf935a4646e04de11d5"><td class="memItemLeft" align="right" valign="top">static String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#a5df71c9c4e3fecf935a4646e04de11d5">executeQuery</a> (String query, String endpoint, Boolean geojsonout)</td></tr>
<tr class="separator:a5df71c9c4e3fecf935a4646e04de11d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff053b6ba7ef89c25b3593a90e0635cd"><td class="memItemLeft" align="right" valign="top">static String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#aff053b6ba7ef89c25b3593a90e0635cd">getTemporalExtentFromTripleStoreData</a> (String triplestore, String queryString)</td></tr>
<tr class="separator:aff053b6ba7ef89c25b3593a90e0635cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bf75e954d3c1636676c3144d61f0fa1"><td class="memItemLeft" align="right" valign="top">static String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#a9bf75e954d3c1636676c3144d61f0fa1">getMetaData</a> (String queryString, String queryurl, String featuretype, JSONObject workingobject)</td></tr>
<tr class="separator:a9bf75e954d3c1636676c3144d61f0fa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d4d9167bb25799fda9197c3be4f30d4"><td class="memItemLeft" align="right" valign="top">static String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#a5d4d9167bb25799fda9197c3be4f30d4">getStyleNames</a> (String baseurl, JSONObject workingobject, String format)</td></tr>
<tr class="separator:a5d4d9167bb25799fda9197c3be4f30d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef725dfee0f51e6220a91217779f1b26"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="a00367.html">StyleObject</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#aef725dfee0f51e6220a91217779f1b26">getStyle</a> (String featuretype, String stylename, String triplestore, String namespace)</td></tr>
<tr class="separator:aef725dfee0f51e6220a91217779f1b26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2125a589edc2a288e72f1a67ad9f78b3"><td class="memItemLeft" align="right" valign="top">static Map&lt; String, String &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#a2125a589edc2a288e72f1a67ad9f78b3">getClassesFromOntology</a> (JSONObject triplestoreconf)</td></tr>
<tr class="separator:a2125a589edc2a288e72f1a67ad9f78b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6c343e8a26797699dd7ea7bf50e34f6"><td class="memItemLeft" align="right" valign="top">static Map&lt; String, String &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#ac6c343e8a26797699dd7ea7bf50e34f6">getPropertiesByClass</a> (String triplestoreurl, String classs)</td></tr>
<tr class="separator:ac6c343e8a26797699dd7ea7bf50e34f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8591b6ad68c9bd6f4a03b48546b24d2c"><td class="memItemLeft" align="right" valign="top">static Map&lt; String, String &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#a8591b6ad68c9bd6f4a03b48546b24d2c">getFeatureTypeInformation</a> (String queryString, String queryurl, String featuretype, JSONObject workingobj)</td></tr>
<tr class="separator:a8591b6ad68c9bd6f4a03b48546b24d2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f1a6d9121adfeab3946427c75995e12"><td class="memItemLeft" align="right" valign="top">static String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#a4f1a6d9121adfeab3946427c75995e12">getPropertyFromMapping</a> (String typename, String propertyname)</td></tr>
<tr class="separator:a4f1a6d9121adfeab3946427c75995e12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd6ff0e4855627212cb2e26e7575255c"><td class="memItemLeft" align="right" valign="top">static String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#afd6ff0e4855627212cb2e26e7575255c">CQLfilterStringToSPARQLQuery</a> (String filter, String bbox, String curquery, String queryurl, String featuretype, String indvar)</td></tr>
<tr class="separator:afd6ff0e4855627212cb2e26e7575255c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac83388db444ca8030dc7d1f21a6f93dd"><td class="memItemLeft" align="right" valign="top">static String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#ac83388db444ca8030dc7d1f21a6f93dd">executePropertyValueQuery</a> (String queryurl, String output, String propertyValue, String startingElement, String featuretype, String resourceids, JSONObject workingobj, String filter, String count, String resultType, String srsName)  throws XMLStreamException </td></tr>
<tr class="separator:ac83388db444ca8030dc7d1f21a6f93dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7e48b08433ea6820366dfcd55fec444"><td class="memItemLeft" align="right" valign="top">static String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#af7e48b08433ea6820366dfcd55fec444">executeQuery</a> (String queryString, String queryurl, String output, String count, String offset, String startingElement, String featuretype, String resourceids, JSONObject workingobj, String filter, String resultType, String srsName, String bbox, String mapstyle, Boolean alternativeFormat, Boolean invertXY)  throws XMLStreamException </td></tr>
<tr class="separator:af7e48b08433ea6820366dfcd55fec444"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a9181599cfb112592f667d6161a33e4e8"><td class="memItemLeft" align="right" valign="top">static String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a> =&quot;&quot;</td></tr>
<tr class="separator:a9181599cfb112592f667d6161a33e4e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:aa9472aff15c69cbcf8d5344814f33bed"><td class="memItemLeft" align="right" valign="top">static Map&lt; String, Map&lt; String, String &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#aa9472aff15c69cbcf8d5344814f33bed">featureTypes</a> =new TreeMap&lt;&gt;()</td></tr>
<tr class="separator:aa9472aff15c69cbcf8d5344814f33bed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pac-static-methods"></a>
Static Package Functions</h2></td></tr>
<tr class="memitem:a2e87c5ede6b7235170d287cd2e254454"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#a2e87c5ede6b7235170d287cd2e254454">[static initializer]</a></td></tr>
<tr class="separator:a2e87c5ede6b7235170d287cd2e254454"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pac-static-attribs"></a>
Static Package Attributes</h2></td></tr>
<tr class="memitem:aa96e328cd8a62fc12bb0cee0a3820dad"><td class="memItemLeft" align="right" valign="top">static Pattern&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#aa96e328cd8a62fc12bb0cee0a3820dad">spatialFunctions</a> =Pattern.compile(&quot;.*(equals|disjoint|intersects|touches|crosses|within|contains|overlaps|dwithin).*&quot;,Pattern.CASE_INSENSITIVE)</td></tr>
<tr class="separator:aa96e328cd8a62fc12bb0cee0a3820dad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68992f1d27be6c66985df6cb7183800c"><td class="memItemLeft" align="right" valign="top">static Pattern&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#a68992f1d27be6c66985df6cb7183800c">binaryOperators</a> =Pattern.compile(&quot;.*(&lt;|&gt;|=|&lt;=|&gt;=|&lt;&gt;).*&quot;,Pattern.CASE_INSENSITIVE)</td></tr>
<tr class="separator:a68992f1d27be6c66985df6cb7183800c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05ea88578bcfbbeee7a9945d156c94d0"><td class="memItemLeft" align="right" valign="top">static Integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00371.html#a05ea88578bcfbbeee7a9945d156c94d0">resultSetSize</a> =0</td></tr>
<tr class="separator:a05ea88578bcfbbeee7a9945d156c94d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2e87c5ede6b7235170d287cd2e254454"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e87c5ede6b7235170d287cd2e254454">&#9670;&nbsp;</a></span>[static initializer]()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">[static initializer] </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">package</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="afd6ff0e4855627212cb2e26e7575255c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd6ff0e4855627212cb2e26e7575255c">&#9670;&nbsp;</a></span>CQLfilterStringToSPARQLQuery()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static String CQLfilterStringToSPARQLQuery </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>bbox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>curquery</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>queryurl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>featuretype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>indvar</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="a00371.html#a4f1a6d9121adfeab3946427c75995e12">TripleStoreConnector.getPropertyFromMapping()</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00371.html#ac83388db444ca8030dc7d1f21a6f93dd">TripleStoreConnector.executePropertyValueQuery()</a>, and <a class="el" href="a00371.html#af7e48b08433ea6820366dfcd55fec444">TripleStoreConnector.executeQuery()</a>.</p>
<div class="fragment"><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                                                                                                                                                      {</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                <span class="keywordflow">if</span>(filter.isEmpty() &amp;&amp; bbox.isEmpty())</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                        <span class="keywordflow">return</span> curquery;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                StringBuilder additionaltriples=<span class="keyword">new</span> StringBuilder();</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                StringBuilder builder=<span class="keyword">new</span> StringBuilder();</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                System.out.println(<span class="stringliteral">&quot;Curquery: &quot;</span>+curquery);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                <span class="keywordflow">if</span>(!bbox.isEmpty()) {</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                        String[] bboxcoords=bbox.split(<span class="stringliteral">&quot;,&quot;</span>);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                        <span class="keywordflow">if</span>(queryurl.contains(<span class="stringliteral">&quot;wikidata&quot;</span>)) {</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                                String newcurquery=<span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                                String the_geomline=<span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                                <span class="keywordflow">for</span>(String line:curquery.split(System.lineSeparator())) {</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                                        <span class="keywordflow">if</span>(line.contains(<span class="stringliteral">&quot;the_geom&quot;</span>) &amp;&amp; !line.contains(<span class="stringliteral">&quot;SELECT&quot;</span>)) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                                                the_geomline=line;                                      </div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                                        }<span class="keywordflow">else</span> {</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                                                newcurquery+=line+System.lineSeparator();</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                                        }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                                }</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                                curquery=newcurquery;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                                builder.append(<span class="stringliteral">&quot;SERVICE wikibase:box { &quot;</span>+the_geomline+System.lineSeparator()+<span class="stringliteral">&quot;  bd:serviceParam wikibase:cornerSouthWest \&quot;POINT(&quot;</span>+bboxcoords[1]+<span class="stringliteral">&quot;,&quot;</span>+bboxcoords[0]+<span class="stringliteral">&quot;)\&quot;^^geo:wktLiteral . &quot;</span>+System.lineSeparator()+<span class="stringliteral">&quot;bd:serviceParam wikibase:cornerNorthEast \&quot;POINT(&quot;</span>+bboxcoords[3]+<span class="stringliteral">&quot;,&quot;</span>+bboxcoords[2]+<span class="stringliteral">&quot;)\&quot;^^geo:wktLiteral . &quot;</span>+System.lineSeparator()+<span class="stringliteral">&quot; }&quot;</span>+System.lineSeparator());</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                                builder.append(<span class="stringliteral">&quot;FILTER(&quot;</span>);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                        }<span class="keywordflow">else</span> {</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                                builder.append(<span class="stringliteral">&quot;FILTER(&quot;</span>);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                                builder.append(<span class="stringliteral">&quot; geof:sfIntersects(\&quot;POLYGON((&quot;</span>+bboxcoords[1]+<span class="stringliteral">&quot; &quot;</span>+bboxcoords[0]+<span class="stringliteral">&quot;,&quot;</span>+bboxcoords[1]+<span class="stringliteral">&quot; &quot;</span>+bboxcoords[2]+<span class="stringliteral">&quot;,&quot;</span>+bboxcoords[3]+<span class="stringliteral">&quot; &quot;</span>+bboxcoords[2]+<span class="stringliteral">&quot;,&quot;</span>+bboxcoords[3]+<span class="stringliteral">&quot; &quot;</span>+bboxcoords[0]+<span class="stringliteral">&quot;,&quot;</span>+bboxcoords[1]+<span class="stringliteral">&quot; &quot;</span>+bboxcoords[0]+<span class="stringliteral">&quot;))\&quot;^^geo:wktLiteral,?the_geom) &quot;</span>);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                        }</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                }<span class="keywordflow">else</span> {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                        builder.append(<span class="stringliteral">&quot;FILTER(&quot;</span>);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                <span class="keywordflow">if</span>(filter.isEmpty()) {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                        builder.append(<span class="stringliteral">&quot;)&quot;</span>);            </div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                        <span class="keywordflow">return</span> curquery+builder.toString().replace(<span class="stringliteral">&quot;FILTER()&quot;</span>,<span class="stringliteral">&quot;&quot;</span>)+System.lineSeparator();</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                }</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                <span class="keywordflow">if</span>(filter.contains(<span class="stringliteral">&quot;AND&quot;</span>)) {</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                        Boolean containedbetween=<span class="keyword">false</span>;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                        String betweenleftoperand=<span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                        String betweenrightoperand=<span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                        <span class="keywordflow">for</span>(String filterex:filter.split(<span class="stringliteral">&quot;AND&quot;</span>)) {</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                                System.out.println(filterex);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                                <span class="keywordflow">if</span>(filterex.contains(<span class="stringliteral">&quot;BETWEEN&quot;</span>)) {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                                        containedbetween=<span class="keyword">true</span>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                                        betweenleftoperand=filterex.substring(0,filterex.indexOf(<span class="stringliteral">&quot;BETWEEN&quot;</span>));</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                                        betweenrightoperand=filterex.substring(filterex.indexOf(<span class="stringliteral">&quot;BETWEEN&quot;</span>)+8);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                                }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(!filterex.contains(<span class="stringliteral">&quot;BETWEEN&quot;</span>) &amp;&amp; containedbetween) {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                                        containedbetween=<span class="keyword">false</span>;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                                        String propname=filterex.substring(0,filterex.indexOf(<span class="stringliteral">&quot;LIKE&quot;</span>)).trim();</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                                        additionaltriples.append(<span class="stringliteral">&quot;?&quot;</span>+betweenleftoperand+<span class="stringliteral">&quot; &lt;&quot;</span>+<a class="code" href="a00371.html#a4f1a6d9121adfeab3946427c75995e12">getPropertyFromMapping</a>(featuretype, propname)+<span class="stringliteral">&quot;&gt; ?&quot;</span>+propname+<span class="stringliteral">&quot; .&quot;</span>+System.lineSeparator());</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                                        builder.append(<span class="stringliteral">&quot;?&quot;</span>+betweenleftoperand+<span class="stringliteral">&quot; &gt; &quot;</span>+betweenrightoperand+<span class="stringliteral">&quot; &amp;&amp; ?&quot;</span>+betweenleftoperand+<span class="stringliteral">&quot; &lt; &quot;</span>+filterex.trim()+<span class="stringliteral">&quot; &quot;</span>);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                                } <span class="keywordflow">if</span>(filterex.equalsIgnoreCase(<span class="stringliteral">&quot;LIKE&quot;</span>)){</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                                        String propname=filterex.substring(0,filterex.indexOf(<span class="stringliteral">&quot;LIKE&quot;</span>)).trim();</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                                        additionaltriples.append(<span class="stringliteral">&quot;?&quot;</span>+indvar+<span class="stringliteral">&quot; &lt;&quot;</span>+<a class="code" href="a00371.html#a4f1a6d9121adfeab3946427c75995e12">getPropertyFromMapping</a>(featuretype, propname)+<span class="stringliteral">&quot;&gt; ?&quot;</span>+propname+<span class="stringliteral">&quot; .&quot;</span>+System.lineSeparator());</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                                        builder.append(<span class="stringliteral">&quot;regex(str(?&quot;</span>+propname+<span class="stringliteral">&quot;),\&quot;&quot;</span>+filterex.substring(filterex.indexOf(<span class="stringliteral">&quot;LIKE&quot;</span>)+4).trim()+<span class="stringliteral">&quot;\&quot;,\&quot;i\&quot;) &quot;</span>);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                                }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="a00371.html#aa96e328cd8a62fc12bb0cee0a3820dad">spatialFunctions</a>.matcher(filterex).matches()){</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                                        String prefix=filterex.substring(0,filterex.indexOf(<span class="charliteral">&#39;,&#39;</span>)+1).trim();                     </div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                                        builder.append(<span class="stringliteral">&quot;geo:sf&quot;</span>+prefix+<span class="stringliteral">&quot; \&quot;&quot;</span>+filterex.substring(filterex.indexOf(<span class="charliteral">&#39;,&#39;</span>)+1,filterex.length()-1).trim()+<span class="stringliteral">&quot;\&quot;^^geo:wktLiteral)&quot;</span>);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                                }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="a00371.html#a68992f1d27be6c66985df6cb7183800c">binaryOperators</a>.matcher(filterex).matches()) {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                                        String[] splitted=filterex.split(<span class="stringliteral">&quot;&lt;|&gt;|=|&lt;=|&gt;=|&lt;&gt;&quot;</span>);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                                        <span class="keywordflow">if</span>(filterex.contains(<span class="stringliteral">&quot;=&quot;</span>)) {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                                                String propname=filterex.substring(0,filterex.indexOf(<span class="charliteral">&#39;=&#39;</span>)).toLowerCase();</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                                                additionaltriples.append(<span class="stringliteral">&quot;?&quot;</span>+indvar+<span class="stringliteral">&quot; &lt;&quot;</span>+<a class="code" href="a00371.html#a4f1a6d9121adfeab3946427c75995e12">getPropertyFromMapping</a>(featuretype, propname)+<span class="stringliteral">&quot;&gt; ?&quot;</span>+propname+<span class="stringliteral">&quot; .&quot;</span>+System.lineSeparator());</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                                                builder.append(<span class="stringliteral">&quot;?&quot;</span>+filterex.toLowerCase().trim()+<span class="stringliteral">&quot; &quot;</span>);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                                        }<span class="keywordflow">else</span> {</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                                                <span class="comment">//builder.append(&quot;?&quot;+featuretype.toLowerCase()+&quot; &quot;+getPropertyFromMapping(featuretype, )</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                                        }</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                                        </div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                                        <span class="comment">//builder.append(&quot;?&quot;+featuretype.toLowerCase()+&quot; ?abc &quot;+WebService+&quot;. &quot;+System.lineSeparator());</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                                        builder.append(<span class="stringliteral">&quot;?&quot;</span>+filterex);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                                }</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                                builder.append(<span class="stringliteral">&quot; &amp;&amp; &quot;</span>);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                        }</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                        builder.delete(builder.length()-4,builder.length());</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(filter.contains(<span class="stringliteral">&quot;=&quot;</span>)){</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                        builder.append(<span class="stringliteral">&quot;?&quot;</span>+filter.substring(0,filter.lastIndexOf(<span class="charliteral">&#39;=&#39;</span>)+1));</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                        String suffix=filter.substring(filter.lastIndexOf(<span class="charliteral">&#39;=&#39;</span>)+1);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                        <span class="keywordflow">if</span>(suffix.matches(<span class="stringliteral">&quot;[0-9\\.]+&quot;</span>)) {</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                                builder.append(suffix+<span class="stringliteral">&quot; &quot;</span>);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                        }<span class="keywordflow">else</span> {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                                builder.append(<span class="stringliteral">&quot;\&quot;&quot;</span>+suffix+<span class="stringliteral">&quot;\&quot;&quot;</span>);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                        }</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                builder.append(<span class="stringliteral">&quot;)&quot;</span>+System.lineSeparator());</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                <span class="keywordflow">return</span> curquery+builder.toString();</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        }</div><div class="ttc" id="a00371_html_aa96e328cd8a62fc12bb0cee0a3820dad"><div class="ttname"><a href="a00371.html#aa96e328cd8a62fc12bb0cee0a3820dad">de.hsmainz.cs.semgis.wfs.triplestore.TripleStoreConnector.spatialFunctions</a></div><div class="ttdeci">static Pattern spatialFunctions</div><div class="ttdef"><b>Definition:</b> TripleStoreConnector.java:52</div></div>
<div class="ttc" id="a00371_html_a4f1a6d9121adfeab3946427c75995e12"><div class="ttname"><a href="a00371.html#a4f1a6d9121adfeab3946427c75995e12">de.hsmainz.cs.semgis.wfs.triplestore.TripleStoreConnector.getPropertyFromMapping</a></div><div class="ttdeci">static String getPropertyFromMapping(String typename, String propertyname)</div><div class="ttdef"><b>Definition:</b> TripleStoreConnector.java:503</div></div>
<div class="ttc" id="a00371_html_a68992f1d27be6c66985df6cb7183800c"><div class="ttname"><a href="a00371.html#a68992f1d27be6c66985df6cb7183800c">de.hsmainz.cs.semgis.wfs.triplestore.TripleStoreConnector.binaryOperators</a></div><div class="ttdeci">static Pattern binaryOperators</div><div class="ttdef"><b>Definition:</b> TripleStoreConnector.java:54</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac83388db444ca8030dc7d1f21a6f93dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac83388db444ca8030dc7d1f21a6f93dd">&#9670;&nbsp;</a></span>executePropertyValueQuery()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static String executePropertyValueQuery </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>queryurl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>propertyValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>startingElement</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>featuretype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>resourceids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JSONObject&#160;</td>
          <td class="paramname"><em>workingobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>resultType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>srsName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws XMLStreamException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="a00371.html#afd6ff0e4855627212cb2e26e7575255c">TripleStoreConnector.CQLfilterStringToSPARQLQuery()</a>, <a class="el" href="a00299.html#ab09d0b676bdd060ceaf68efa0a32a4cf">ResultFormatter.formatter()</a>, <a class="el" href="a00299.html#afce25d64087d96d66b6b5535660a8ddb">ResultFormatter.getFormatter()</a>, and <a class="el" href="a00299.html#a1ce6ef499b64cec5981912a236baa199">ResultFormatter.lastQueriedElemCount</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00403.html#ac7ca200a0e7247ec7f3c1917d330f65d">WebService.getPropertyValue()</a>.</p>
<div class="fragment"><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                                                                                                                                                        {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                String queryString=<span class="stringliteral">&quot;&quot;</span>,indvar=<span class="stringliteral">&quot;item&quot;</span>;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                <span class="keywordflow">if</span>(workingobj.has(<span class="stringliteral">&quot;indvar&quot;</span>)) {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                        indvar=workingobj.getString(<span class="stringliteral">&quot;indvar&quot;</span>);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                <span class="keywordflow">if</span>(resultType.equalsIgnoreCase(<span class="stringliteral">&quot;hits&quot;</span>)) {</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                        queryString=<span class="stringliteral">&quot; SELECT (COUNT(DISTINCT ?&quot;</span>+indvar+<span class="stringliteral">&quot;) AS ?count) &quot;</span>+queryString.substring(queryString.indexOf(<span class="stringliteral">&quot;WHERE&quot;</span>));</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                        <span class="comment">//queryString=&quot; SELECT (COUNT(DISTINCT ?&quot;+featuretype.toLowerCase()+&quot;) AS ?count) WHERE { ?&quot;+featuretype.toLowerCase()+&quot; ?abc ?def .} &quot;+System.lineSeparator();</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                }<span class="keywordflow">else</span> {</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                        queryString+=<span class="stringliteral">&quot; SELECT ?&quot;</span>+featuretype.toLowerCase()+<span class="stringliteral">&quot; ?member WHERE{&quot;</span>+System.lineSeparator();</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                }</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                <span class="keywordflow">if</span>(!resourceids.isEmpty() &amp;&amp; !resourceids.contains(<span class="stringliteral">&quot;,&quot;</span>)) {</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                        queryString=queryString.replace(<span class="stringliteral">&quot;WHERE{&quot;</span>,<span class="stringliteral">&quot;WHERE{&quot;</span>+System.lineSeparator()+<span class="stringliteral">&quot; BIND( &lt;&quot;</span>+workingobj.getString(<span class="stringliteral">&quot;namespace&quot;</span>)+resourceids+<span class="stringliteral">&quot;&gt; AS ?&quot;</span>+indvar+<span class="stringliteral">&quot;) &quot;</span>+System.lineSeparator());</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(!resourceids.isEmpty() &amp;&amp; resourceids.contains(<span class="stringliteral">&quot;,&quot;</span>)) {</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                        StringBuilder toreplace=<span class="keyword">new</span> StringBuilder();</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                        toreplace.append(<span class="stringliteral">&quot;WHERE{ &quot;</span>+System.lineSeparator()+<span class="stringliteral">&quot;VALUES ?&quot;</span>+indvar+<span class="stringliteral">&quot;{ &quot;</span>);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                        <span class="keywordflow">for</span>(String uri:resourceids.split(<span class="stringliteral">&quot;,&quot;</span>)) {</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                                toreplace.append(<span class="stringliteral">&quot;&lt;&quot;</span>+workingobj.getString(<span class="stringliteral">&quot;namespace&quot;</span>)+uri+<span class="stringliteral">&quot;&gt; &quot;</span>); </div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                        }</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                        toreplace.append(<span class="stringliteral">&quot;} &quot;</span>+System.lineSeparator());</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                        queryString=queryString.replace(<span class="stringliteral">&quot;WHERE{&quot;</span>,System.lineSeparator()+toreplace.toString());  </div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                }<span class="keywordflow">else</span> {</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                        queryString=queryString.replace(<span class="stringliteral">&quot;WHERE{&quot;</span>,<span class="stringliteral">&quot;WHERE{&quot;</span>+System.lineSeparator());</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                }</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                queryString+=<span class="stringliteral">&quot;?&quot;</span>+workingobj.getString(<span class="stringliteral">&quot;indvar&quot;</span>)+<span class="stringliteral">&quot; &lt;&quot;</span>+propertyValue+<span class="stringliteral">&quot;&gt; ?member .&quot;</span>+System.lineSeparator();</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                queryString=queryString.substring(0,queryString.lastIndexOf(<span class="charliteral">&#39;}&#39;</span>));</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                queryString=<a class="code" href="a00371.html#afd6ff0e4855627212cb2e26e7575255c">CQLfilterStringToSPARQLQuery</a>(filter,<span class="stringliteral">&quot;&quot;</span>,queryString,queryurl,featuretype,indvar);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                queryString+=<span class="stringliteral">&quot;}&quot;</span>+System.lineSeparator();</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                <span class="keywordflow">if</span>(!resultType.equalsIgnoreCase(<span class="stringliteral">&quot;hits&quot;</span>) &amp;&amp; workingobj.has(<span class="stringliteral">&quot;useorderby&quot;</span>) &amp;&amp; workingobj.getBoolean(<span class="stringliteral">&quot;useorderby&quot;</span>))</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                        queryString+=<span class="stringliteral">&quot; ORDER BY ?&quot;</span>+indvar+System.lineSeparator();</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                Integer limit=Integer.valueOf(count);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                <span class="keywordflow">if</span>(limit&gt;0 &amp;&amp; !resultType.equalsIgnoreCase(<span class="stringliteral">&quot;hits&quot;</span>))</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                        queryString+=<span class="stringliteral">&quot; LIMIT &quot;</span>+limit;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                System.out.println(<a class="code" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a>+queryString);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                System.out.println(resourceids);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                Query query = QueryFactory.create(<a class="code" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a>+queryString);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                QueryExecution qexec = QueryExecutionFactory.sparqlService(queryurl, query);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                ResultFormatter resformat=ResultFormatter.getFormatter(output);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                <span class="keywordflow">if</span>(resformat==null) {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                        <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                }</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                ResultSet results = qexec.execSelect();</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                <span class="keywordflow">if</span>(resultType.equalsIgnoreCase(<span class="stringliteral">&quot;hits&quot;</span>)) {</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                        <span class="keywordflow">if</span>(results.hasNext()) {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                                <span class="keywordflow">return</span> results.next().getLiteral(<span class="stringliteral">&quot;count&quot;</span>).getString();</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                        }</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                }</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                String res=resformat.formatter(results,startingElement,featuretype.toLowerCase(),propertyValue,</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                                (workingobj.has(<span class="stringliteral">&quot;typeColumn&quot;</span>)?workingobj.get(<span class="stringliteral">&quot;typeColumn&quot;</span>).toString():<span class="stringliteral">&quot;&quot;</span>),<span class="keyword">true</span>,<span class="keyword">false</span>,</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                                srsName,(workingobj.has(<span class="stringliteral">&quot;indvar&quot;</span>)?workingobj.getString(<span class="stringliteral">&quot;indvar&quot;</span>):<span class="stringliteral">&quot;item&quot;</span>),</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                                (workingobj.has(<span class="stringliteral">&quot;targetCRS&quot;</span>)?workingobj.getString(<span class="stringliteral">&quot;targetCRS&quot;</span>):<span class="stringliteral">&quot;&quot;</span>),null,null,null,<span class="keyword">false</span>,<span class="keyword">false</span>);</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                qexec.close();</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                <span class="keywordflow">if</span>(resformat.lastQueriedElemCount==0) {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                }</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        }</div><div class="ttc" id="a00371_html_afd6ff0e4855627212cb2e26e7575255c"><div class="ttname"><a href="a00371.html#afd6ff0e4855627212cb2e26e7575255c">de.hsmainz.cs.semgis.wfs.triplestore.TripleStoreConnector.CQLfilterStringToSPARQLQuery</a></div><div class="ttdeci">static String CQLfilterStringToSPARQLQuery(String filter, String bbox, String curquery, String queryurl, String featuretype, String indvar)</div><div class="ttdef"><b>Definition:</b> TripleStoreConnector.java:513</div></div>
<div class="ttc" id="a00371_html_a9181599cfb112592f667d6161a33e4e8"><div class="ttname"><a href="a00371.html#a9181599cfb112592f667d6161a33e4e8">de.hsmainz.cs.semgis.wfs.triplestore.TripleStoreConnector.prefixCollection</a></div><div class="ttdeci">static String prefixCollection</div><div class="ttdef"><b>Definition:</b> TripleStoreConnector.java:36</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5df71c9c4e3fecf935a4646e04de11d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5df71c9c4e3fecf935a4646e04de11d5">&#9670;&nbsp;</a></span>executeQuery() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static String executeQuery </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Boolean&#160;</td>
          <td class="paramname"><em>geojsonout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="a00231.html#a4d60ad97c2097d9323921b749f163e26">GeoJSONFormatter.formatter()</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00403.html#a1d181ee2167c77d686a7c77db89ab833">WebService.collectionItems()</a>, <a class="el" href="a00403.html#a264995f2dc3f6ca554c0e03acbc37aec">WebService.getFeature()</a>, <a class="el" href="a00403.html#a366a371862290189ff2c3cb166b21b9d">WebService.getFeatureById()</a>, and <a class="el" href="a00403.html#aa42b5154ec2b2ed30598975610a291d0">WebService.queryService()</a>.</p>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                                                                                             {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                query = <a class="code" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a> + query;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                System.out.println(query);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                Query queryjena = QueryFactory.create(query);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                <span class="comment">//&quot;http://localhost:8080/rdf4j-server/repositories/pleiades&quot;</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                QueryExecution qe = QueryExecutionFactory.sparqlService(endpoint, queryjena);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                        ResultSet rs = qe.execSelect();</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                GeoJSONFormatter form=<span class="keyword">new</span> GeoJSONFormatter();</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                String res=form.formatter(rs, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;item&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;item&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,null,null,null,<span class="keyword">false</span>,<span class="keyword">false</span>);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                qe.close();</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        }</div><div class="ttc" id="a00371_html_a9181599cfb112592f667d6161a33e4e8"><div class="ttname"><a href="a00371.html#a9181599cfb112592f667d6161a33e4e8">de.hsmainz.cs.semgis.wfs.triplestore.TripleStoreConnector.prefixCollection</a></div><div class="ttdeci">static String prefixCollection</div><div class="ttdef"><b>Definition:</b> TripleStoreConnector.java:36</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af7e48b08433ea6820366dfcd55fec444"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7e48b08433ea6820366dfcd55fec444">&#9670;&nbsp;</a></span>executeQuery() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static String executeQuery </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>queryString</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>queryurl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>startingElement</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>featuretype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>resourceids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JSONObject&#160;</td>
          <td class="paramname"><em>workingobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>resultType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>srsName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>bbox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>mapstyle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Boolean&#160;</td>
          <td class="paramname"><em>alternativeFormat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Boolean&#160;</td>
          <td class="paramname"><em>invertXY</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws XMLStreamException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="a00371.html#afd6ff0e4855627212cb2e26e7575255c">TripleStoreConnector.CQLfilterStringToSPARQLQuery()</a>, <a class="el" href="a00299.html#ab09d0b676bdd060ceaf68efa0a32a4cf">ResultFormatter.formatter()</a>, <a class="el" href="a00299.html#afce25d64087d96d66b6b5535660a8ddb">ResultFormatter.getFormatter()</a>, <a class="el" href="a00371.html#aef725dfee0f51e6220a91217779f1b26">TripleStoreConnector.getStyle()</a>, and <a class="el" href="a00299.html#a1ce6ef499b64cec5981912a236baa199">ResultFormatter.lastQueriedElemCount</a>.</p>
<div class="fragment"><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                                                                                                                                                                         {</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                <span class="keywordflow">if</span>(invertXY==null) {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                        invertXY=<span class="keyword">false</span>;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                }</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                System.out.println(resultType);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                System.out.println(mapstyle);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                StyleObject style=null;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                <span class="keywordflow">if</span>(!mapstyle.isEmpty()) {</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                        style=TripleStoreConnector.getStyle(featuretype, mapstyle, workingobj.getString(<span class="stringliteral">&quot;triplestore&quot;</span>),workingobj.getString(<span class="stringliteral">&quot;namespace&quot;</span>));</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                        System.out.println(style);</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                }</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                String indvar=<span class="stringliteral">&quot;item&quot;</span>;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                <span class="keywordflow">if</span>(workingobj.has(<span class="stringliteral">&quot;indvar&quot;</span>)) {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                        indvar=workingobj.getString(<span class="stringliteral">&quot;indvar&quot;</span>);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                }</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                queryString=queryString.replace(<span class="stringliteral">&quot; .&quot;</span>,<span class="stringliteral">&quot; .&quot;</span>+System.lineSeparator());</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                System.out.println(queryString);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                <span class="keywordflow">if</span>(resultType.equalsIgnoreCase(<span class="stringliteral">&quot;hits&quot;</span>)) {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                        queryString=<span class="stringliteral">&quot; SELECT (COUNT(DISTINCT ?&quot;</span>+indvar+<span class="stringliteral">&quot;) AS ?count) &quot;</span>+queryString.substring(queryString.indexOf(<span class="stringliteral">&quot;WHERE&quot;</span>));</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                        <span class="comment">//queryString=&quot; SELECT (COUNT(DISTINCT ?&quot;+featuretype.toLowerCase()+&quot;) AS ?count) WHERE{ ?&quot;+featuretype.toLowerCase()+&quot; ?abc ?def .}&quot;+System.lineSeparator();</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                }<span class="keywordflow">else</span> {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                        <span class="comment">//queryString+=&quot; SELECT ?&quot;+indvar+&quot; ?member WHERE{&quot;+System.lineSeparator();</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                }</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                <span class="keywordflow">if</span>(!resourceids.isEmpty() &amp;&amp; !resourceids.contains(<span class="stringliteral">&quot;,&quot;</span>)) {</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                        queryString=queryString.replace(<span class="stringliteral">&quot;WHERE{&quot;</span>,<span class="stringliteral">&quot;WHERE{&quot;</span>+System.lineSeparator()+<span class="stringliteral">&quot; BIND( &lt;&quot;</span>+workingobj.getString(<span class="stringliteral">&quot;namespace&quot;</span>)+resourceids+<span class="stringliteral">&quot;&gt; AS ?&quot;</span>+indvar+<span class="stringliteral">&quot;) &quot;</span>);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(!resourceids.isEmpty() &amp;&amp; resourceids.contains(<span class="stringliteral">&quot;,&quot;</span>)) {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                        StringBuilder toreplace=<span class="keyword">new</span> StringBuilder();</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                        toreplace.append(<span class="stringliteral">&quot;WHERE{ &quot;</span>+System.lineSeparator()+<span class="stringliteral">&quot; VALUES ?&quot;</span>+indvar+<span class="stringliteral">&quot;{ &quot;</span>);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                        <span class="keywordflow">for</span>(String uri:resourceids.split(<span class="stringliteral">&quot;,&quot;</span>)) {</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                                toreplace.append(<span class="stringliteral">&quot;&lt;&quot;</span>+workingobj.getString(<span class="stringliteral">&quot;namespace&quot;</span>)+uri+<span class="stringliteral">&quot;&gt; &quot;</span>); </div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                        }</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                        toreplace.append(<span class="stringliteral">&quot;}&quot;</span>+System.lineSeparator());</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                        queryString=queryString.replace(<span class="stringliteral">&quot;WHERE{&quot;</span>,System.lineSeparator()+toreplace.toString());  </div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                }<span class="keywordflow">else</span> {</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                        queryString=queryString.replace(<span class="stringliteral">&quot;WHERE{&quot;</span>,<span class="stringliteral">&quot;WHERE{&quot;</span>+System.lineSeparator());</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                }</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                System.out.println(<span class="stringliteral">&quot;Before Inner Select: &quot;</span>+queryString);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                Integer limit=Integer.valueOf(count);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                Integer offsetval=Integer.valueOf(offset);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                <span class="keywordflow">if</span>(limit&gt;=1 || offsetval&gt;0) {</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                        StringBuilder toreplace=<span class="keyword">new</span> StringBuilder();</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                        toreplace.append(<span class="stringliteral">&quot;WHERE{ { SELECT ?&quot;</span>+indvar+<span class="stringliteral">&quot; WHERE { ?&quot;</span>+indvar+<span class="stringliteral">&quot; rdf:type &lt;&quot;</span>+workingobj.getString(<span class="stringliteral">&quot;class&quot;</span>)+<span class="stringliteral">&quot;&gt; . }&quot;</span>+System.lineSeparator());</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                        <span class="keywordflow">if</span>(limit&gt;=1 &amp;&amp; !resultType.equalsIgnoreCase(<span class="stringliteral">&quot;hits&quot;</span>)) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                                toreplace.append(<span class="stringliteral">&quot; LIMIT &quot;</span>+count+System.lineSeparator());</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                        }</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                        <span class="keywordflow">if</span>(offsetval&gt;0) {</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                                toreplace.append(<span class="stringliteral">&quot; OFFSET &quot;</span>+offsetval+System.lineSeparator());</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                        }</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                        toreplace.append(<span class="stringliteral">&quot; } &quot;</span>+System.lineSeparator());</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                        queryString=queryString.replace(<span class="stringliteral">&quot;WHERE{&quot;</span>, toreplace);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                }       </div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                System.out.println(<span class="stringliteral">&quot;PreCurQuery: &quot;</span>+queryString);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                queryString=queryString.substring(0,queryString.lastIndexOf(<span class="charliteral">&#39;}&#39;</span>));</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                queryString=<a class="code" href="a00371.html#afd6ff0e4855627212cb2e26e7575255c">CQLfilterStringToSPARQLQuery</a>(filter,bbox,queryString,queryurl,featuretype,indvar)+<span class="stringliteral">&quot;}&quot;</span>;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                <span class="keywordflow">if</span>(!resultType.equalsIgnoreCase(<span class="stringliteral">&quot;hits&quot;</span>) &amp;&amp; workingobj.has(<span class="stringliteral">&quot;useorderby&quot;</span>) &amp;&amp; workingobj.getBoolean(<span class="stringliteral">&quot;useorderby&quot;</span>))</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                        queryString+=System.lineSeparator()+<span class="stringliteral">&quot;ORDER BY ?&quot;</span>+indvar+System.lineSeparator();</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                <span class="comment">/*System.out.println(&quot;Count: &quot;+count);</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">                if(limit&gt;=1 &amp;&amp; !resultType.equalsIgnoreCase(&quot;hits&quot;)) {</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">                        queryString+=&quot; LIMIT &quot;+count+System.lineSeparator();</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">                }</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">                if(offsetval&gt;0) {</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">                        queryString+=&quot; OFFSET &quot;+offsetval+System.lineSeparator();</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">                }*/</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                System.out.println(<span class="stringliteral">&quot;Final Query: &quot;</span>+<a class="code" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a>+queryString);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                System.out.println(resourceids);</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                Query query = QueryFactory.create(<a class="code" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a>+queryString);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                QueryExecution qexec = QueryExecutionFactory.sparqlService(queryurl, query);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                ResultFormatter resformat=ResultFormatter.getFormatter(output);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                <span class="keywordflow">if</span>(resformat==null) {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                        <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                }</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                ResultSet results = qexec.execSelect();</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                <span class="keywordflow">if</span>(resultType.equalsIgnoreCase(<span class="stringliteral">&quot;hits&quot;</span>)) {</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                        <span class="keywordflow">if</span>(results.hasNext()) {</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                                String res=results.next().getLiteral(<span class="stringliteral">&quot;count&quot;</span>).getString();</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                                qexec.close();</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                                <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                        }</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                }</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                String res=resformat.formatter(results,startingElement,featuretype.toLowerCase(),<span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                                (workingobj.has(<span class="stringliteral">&quot;typeColumn&quot;</span>)?workingobj.get(<span class="stringliteral">&quot;typeColumn&quot;</span>).toString():<span class="stringliteral">&quot;&quot;</span>),<span class="keyword">false</span>,<span class="keyword">false</span>,</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                                srsName,indvar,</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                                (workingobj.has(<span class="stringliteral">&quot;targetCRS&quot;</span>)?workingobj.getString(<span class="stringliteral">&quot;targetCRS&quot;</span>):<span class="stringliteral">&quot;&quot;</span>),null,null,style,alternativeFormat,invertXY);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                qexec.close();</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                <span class="keywordflow">if</span>(resformat.lastQueriedElemCount==0) {</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                }</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        }</div><div class="ttc" id="a00371_html_afd6ff0e4855627212cb2e26e7575255c"><div class="ttname"><a href="a00371.html#afd6ff0e4855627212cb2e26e7575255c">de.hsmainz.cs.semgis.wfs.triplestore.TripleStoreConnector.CQLfilterStringToSPARQLQuery</a></div><div class="ttdeci">static String CQLfilterStringToSPARQLQuery(String filter, String bbox, String curquery, String queryurl, String featuretype, String indvar)</div><div class="ttdef"><b>Definition:</b> TripleStoreConnector.java:513</div></div>
<div class="ttc" id="a00371_html_a9181599cfb112592f667d6161a33e4e8"><div class="ttname"><a href="a00371.html#a9181599cfb112592f667d6161a33e4e8">de.hsmainz.cs.semgis.wfs.triplestore.TripleStoreConnector.prefixCollection</a></div><div class="ttdeci">static String prefixCollection</div><div class="ttdef"><b>Definition:</b> TripleStoreConnector.java:36</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a723f01dec66e801f28fd03351a36c0ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a723f01dec66e801f28fd03351a36c0ad">&#9670;&nbsp;</a></span>getBoundingBoxFromTripleStoreData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Double [] getBoundingBoxFromTripleStoreData </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>triplestore</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>queryString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="a00403.html#a28bcff08fde95d77ffa6a502701688ce">WebService.describeFeatureType()</a>, <a class="el" href="a00403.html#af4323d0e010d3b5f05244c917a43eb59">WebService.describeFeatureTypeWFS10()</a>, <a class="el" href="a00371.html#a8b260eecbaabcef8473fd87ada040682">TripleStoreConnector.main()</a>, and <a class="el" href="a00403.html#a7a8fdc0242859fa8c99102a9095b600f">WebService.WebService()</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                                                                                                        {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                Double minx=Double.MAX_VALUE,maxx=Double.MIN_VALUE,miny=Double.MAX_VALUE,maxy=Double.MIN_VALUE;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                <span class="keywordflow">if</span>(queryString.contains(<span class="stringliteral">&quot;the_geom&quot;</span>)) {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                        queryString=<span class="stringliteral">&quot; SELECT ?the_geom &quot;</span>+queryString.substring(queryString.indexOf(<span class="stringliteral">&quot;WHERE&quot;</span>));</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(queryString.contains(<span class="stringliteral">&quot;lat&quot;</span>) &amp;&amp; queryString.contains(<span class="stringliteral">&quot;lon&quot;</span>)) {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                        queryString=<span class="stringliteral">&quot; SELECT (MIN(?lat) AS ?minlat) (MAX(?lat) AS ?maxlat) (MIN(?lon) AS ?minlon) (MAX(?lon) AS ?maxlon) &quot;</span>+queryString.substring(queryString.indexOf(<span class="stringliteral">&quot;WHERE&quot;</span>));</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                }</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                <span class="keywordflow">try</span> {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                Query query = QueryFactory.create(<a class="code" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a>+queryString);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                QueryExecution qexec = QueryExecutionFactory.sparqlService(triplestore, query+<span class="stringliteral">&quot; LIMIT 5000&quot;</span>);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                ResultSet results = qexec.execSelect();</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                Integer outercounter=0;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                <span class="keywordflow">while</span>(results.hasNext()) {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                        QuerySolution solu=results.next();</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                        <span class="keywordflow">if</span>(solu.get(<span class="stringliteral">&quot;the_geom&quot;</span>)==null &amp;&amp; solu.get(<span class="stringliteral">&quot;minlat&quot;</span>)==null &amp;&amp; solu.get(<span class="stringliteral">&quot;minlon&quot;</span>)==null) {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                        }</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                        <span class="keywordflow">if</span>(solu.get(<span class="stringliteral">&quot;minlon&quot;</span>)!=null) {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                                <span class="keywordflow">if</span>(solu.get(<span class="stringliteral">&quot;minlon&quot;</span>)!=null) {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                                        minx=Double.valueOf(solu.get(<span class="stringliteral">&quot;minlon&quot;</span>).toString().substring(0,solu.get(<span class="stringliteral">&quot;minlon&quot;</span>).toString().indexOf(<span class="stringliteral">&quot;^^&quot;</span>)));</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                                }</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                                <span class="keywordflow">if</span>(solu.get(<span class="stringliteral">&quot;minlat&quot;</span>)!=null) {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                                        miny=Double.valueOf(solu.get(<span class="stringliteral">&quot;minlat&quot;</span>).toString().substring(0,solu.get(<span class="stringliteral">&quot;minlat&quot;</span>).toString().indexOf(<span class="stringliteral">&quot;^^&quot;</span>)));</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                                }</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                                <span class="keywordflow">if</span>(solu.get(<span class="stringliteral">&quot;maxlon&quot;</span>)!=null) {</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                                        maxx=Double.valueOf(solu.get(<span class="stringliteral">&quot;maxlon&quot;</span>).toString().substring(0,solu.get(<span class="stringliteral">&quot;maxlon&quot;</span>).toString().indexOf(<span class="stringliteral">&quot;^^&quot;</span>)));</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                                }</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                <span class="keywordflow">if</span>(solu.get(<span class="stringliteral">&quot;maxlat&quot;</span>)!=null) {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                                        maxy=Double.valueOf(solu.get(<span class="stringliteral">&quot;maxlat&quot;</span>).toString().substring(0,solu.get(<span class="stringliteral">&quot;maxlat&quot;</span>).toString().indexOf(<span class="stringliteral">&quot;^^&quot;</span>)));</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                                }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                                <span class="keywordflow">return</span> <span class="keyword">new</span> Double[] {minx,miny,maxx,maxy};</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                        }</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                        <span class="keywordflow">if</span>(solu.get(<span class="stringliteral">&quot;the_geom&quot;</span>)!=null) {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                        String wktLiteral=solu.get(<span class="stringliteral">&quot;the_geom&quot;</span>).toString();</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                        System.out.println(solu.get(<span class="stringliteral">&quot;the_geom&quot;</span>));</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                        <span class="keywordflow">if</span>(!wktLiteral.contains(<span class="stringliteral">&quot;(&quot;</span>)) {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                        }</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                        wktLiteral=wktLiteral.substring(0,wktLiteral.indexOf(<span class="stringliteral">&quot;^^&quot;</span>));</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                        wktLiteral=wktLiteral.substring(wktLiteral.indexOf(<span class="charliteral">&#39;(&#39;</span>)).replace(<span class="stringliteral">&quot;(&quot;</span>,<span class="stringliteral">&quot;&quot;</span>).replace(<span class="stringliteral">&quot;)&quot;</span>,<span class="stringliteral">&quot;&quot;</span>).replace(<span class="stringliteral">&quot;,&quot;</span>,<span class="stringliteral">&quot; &quot;</span>).trim();</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                        Integer counter=0;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                        <span class="keywordflow">for</span>(String coord:wktLiteral.split(<span class="stringliteral">&quot; &quot;</span>)) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                                <span class="keywordflow">if</span>(coord.isEmpty())</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                                Double curcoord=Double.valueOf(coord);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                                <span class="keywordflow">if</span>(counter%2==0) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                                        <span class="keywordflow">if</span>(curcoord&lt;minx) {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                                                minx=curcoord;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                                        }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                                        <span class="keywordflow">if</span>(curcoord&gt;maxx) {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                                                maxx=curcoord;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                                        }</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                                }<span class="keywordflow">else</span> {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                                        <span class="keywordflow">if</span>(curcoord&lt;miny) {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                                                miny=curcoord;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                                        }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                        <span class="keywordflow">if</span>(curcoord&gt;maxy) {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                                                maxy=curcoord;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                        }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                                }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                                counter++;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                        }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                        }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(solu.get(<span class="stringliteral">&quot;lat&quot;</span>)!=null &amp;&amp; solu.get(<span class="stringliteral">&quot;lon&quot;</span>)!=null) {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                                Double lon=Double.valueOf(solu.get(<span class="stringliteral">&quot;lon&quot;</span>).toString().substring(0,solu.get(<span class="stringliteral">&quot;lon&quot;</span>).toString().indexOf(<span class="stringliteral">&quot;^^&quot;</span>)));</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                                Double lat=Double.valueOf(solu.get(<span class="stringliteral">&quot;lat&quot;</span>).toString().substring(0,solu.get(<span class="stringliteral">&quot;lat&quot;</span>).toString().indexOf(<span class="stringliteral">&quot;^^&quot;</span>)));</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                                <span class="keywordflow">if</span>(lon&lt;minx) {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                                        minx=lon;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                                }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                <span class="keywordflow">if</span>(lon&gt;maxx) {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                                        maxx=lon;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                                }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                                <span class="keywordflow">if</span>(lat&lt;miny) {</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                        miny=lat;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                                }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                                <span class="keywordflow">if</span>(lat&gt;maxy) {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                                        maxy=lat;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                                }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                        }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                        outercounter++;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                System.out.println(outercounter/2);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                qexec.close();</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                }<span class="keywordflow">catch</span>(Exception e) {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                        e.printStackTrace();</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> Double[] {minx,miny,maxx,maxy};</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        }</div><div class="ttc" id="a00371_html_a9181599cfb112592f667d6161a33e4e8"><div class="ttname"><a href="a00371.html#a9181599cfb112592f667d6161a33e4e8">de.hsmainz.cs.semgis.wfs.triplestore.TripleStoreConnector.prefixCollection</a></div><div class="ttdeci">static String prefixCollection</div><div class="ttdef"><b>Definition:</b> TripleStoreConnector.java:36</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2125a589edc2a288e72f1a67ad9f78b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2125a589edc2a288e72f1a67ad9f78b3">&#9670;&nbsp;</a></span>getClassesFromOntology()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Map&lt;String,String&gt; getClassesFromOntology </td>
          <td>(</td>
          <td class="paramtype">JSONObject&#160;</td>
          <td class="paramname"><em>triplestoreconf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="a00403.html#a129c59e89ce0f807396aba20d86b890d">WebService.getGeoClassesFromOntology()</a>.</p>
<div class="fragment"><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                                                                                           {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                Map&lt;String,String&gt; result=<span class="keyword">new</span> TreeMap&lt;String,String&gt;();</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                System.out.println(<a class="code" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a>+<span class="stringliteral">&quot; SELECT DISTINCT ?class ?label WHERE { ?abc &lt;&quot;</span>+triplestoreconf.getString(<span class="stringliteral">&quot;type&quot;</span>)+<span class="stringliteral">&quot;&gt; ?class . OPTIONAL{ ?class rdfs:label ?label } ?abc &lt;&quot;</span>+triplestoreconf.getJSONArray(<span class="stringliteral">&quot;geo&quot;</span>).getString(0)+<span class="stringliteral">&quot;&gt; ?geom . } &quot;</span>);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                Query query = QueryFactory.create(<a class="code" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a>+<span class="stringliteral">&quot; SELECT DISTINCT ?class ?label WHERE { ?abc &lt;&quot;</span>+triplestoreconf.getString(<span class="stringliteral">&quot;type&quot;</span>)+<span class="stringliteral">&quot;&gt; ?class . ?abc &lt;&quot;</span>+triplestoreconf.getJSONArray(<span class="stringliteral">&quot;geo&quot;</span>).getString(0)+<span class="stringliteral">&quot;&gt; ?geom . } LIMIT 500&quot;</span>);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                QueryExecution qexec = QueryExecutionFactory.sparqlService(triplestoreconf.getString(<span class="stringliteral">&quot;endpoint&quot;</span>), query);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                ResultSet resformat=qexec.execSelect();</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                <span class="keywordflow">while</span>(resformat.hasNext()) {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                        QuerySolution cur = resformat.next();</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                        <span class="keywordflow">if</span>(cur!=null) {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                                <span class="keywordflow">if</span>(cur.get(<span class="stringliteral">&quot;label&quot;</span>)!=null) {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                                        result.put(cur.get(<span class="stringliteral">&quot;class&quot;</span>).toString(),cur.get(<span class="stringliteral">&quot;label&quot;</span>).toString());    </div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                                }<span class="keywordflow">else</span> {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                                        result.put(cur.get(<span class="stringliteral">&quot;class&quot;</span>).toString(),cur.get(<span class="stringliteral">&quot;class&quot;</span>).toString().substring(cur.get(<span class="stringliteral">&quot;class&quot;</span>).toString().lastIndexOf(<span class="charliteral">&#39;/&#39;</span>)+1));</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                                }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                        }               </div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                }</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                qexec.close();</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        }</div><div class="ttc" id="a00371_html_a9181599cfb112592f667d6161a33e4e8"><div class="ttname"><a href="a00371.html#a9181599cfb112592f667d6161a33e4e8">de.hsmainz.cs.semgis.wfs.triplestore.TripleStoreConnector.prefixCollection</a></div><div class="ttdeci">static String prefixCollection</div><div class="ttdef"><b>Definition:</b> TripleStoreConnector.java:36</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8591b6ad68c9bd6f4a03b48546b24d2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8591b6ad68c9bd6f4a03b48546b24d2c">&#9670;&nbsp;</a></span>getFeatureTypeInformation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Map&lt;String,String&gt; getFeatureTypeInformation </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>queryString</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>queryurl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>featuretype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JSONObject&#160;</td>
          <td class="paramname"><em>workingobj</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="a00403.html#a37319c767ff2ca750a3ab110aa78ac7a">WebService.nameSpaceCache</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00403.html#a16a865710dde3c76fa4ebb31e7d641c7">WebService.collectionInformation()</a>, <a class="el" href="a00403.html#a1d181ee2167c77d686a7c77db89ab833">WebService.collectionItems()</a>, <a class="el" href="a00403.html#a10f067eba42289e586f350c48ddba20e">WebService.describeFeatureType()</a>, <a class="el" href="a00403.html#a89e02f1cb7ed74aa3acf20da27e92c1e">WebService.describeFeatureTypeJSON()</a>, <a class="el" href="a00403.html#a0d7c82140929edf4598696a7252a7401">WebService.getCollectionMetadata()</a>, <a class="el" href="a00403.html#a264995f2dc3f6ca554c0e03acbc37aec">WebService.getFeature()</a>, <a class="el" href="a00403.html#a366a371862290189ff2c3cb166b21b9d">WebService.getFeatureById()</a>, <a class="el" href="a00403.html#ac7ca200a0e7247ec7f3c1917d330f65d">WebService.getPropertyValue()</a>, and <a class="el" href="a00403.html#ae52a932fac3aaf398d86fafc31269f30">WebService.queryables()</a>.</p>
<div class="fragment"><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                                                                 {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                System.out.println(<span class="stringliteral">&quot;Getting FeatureType Information for &quot;</span>+featuretype+<span class="stringliteral">&quot;...&quot;</span>);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="a00371.html#aa9472aff15c69cbcf8d5344814f33bed">featureTypes</a>.containsKey(featuretype.toLowerCase())) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="a00371.html#aa9472aff15c69cbcf8d5344814f33bed">featureTypes</a>.get(featuretype.toLowerCase());</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                String indvar=<span class="stringliteral">&quot;item&quot;</span>;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                <span class="keywordflow">if</span>(workingobj.has(<span class="stringliteral">&quot;indvar&quot;</span>)) {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                        indvar=workingobj.getString(<span class="stringliteral">&quot;indvar&quot;</span>);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                }</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                Map&lt;String,String&gt; result=<span class="keyword">new</span> TreeMap&lt;&gt;();</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                Map&lt;String,String&gt; nscache=<span class="keyword">new</span> TreeMap&lt;&gt;();</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                System.out.println(<a class="code" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a>+queryString+<span class="stringliteral">&quot; LIMIT 1&quot;</span>);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                <span class="comment">//if(workingobj.has(&quot;useorderby&quot;) &amp;&amp; workingobj.getBoolean(&quot;useorderby&quot;))</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                        <span class="comment">//queryString+=&quot; ORDER BY ?&quot;+indvar+System.lineSeparator();</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                Query query;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                <span class="keywordflow">if</span>(queryString.contains(<span class="stringliteral">&quot;?rel&quot;</span>) &amp;&amp; queryString.contains(<span class="stringliteral">&quot;?val&quot;</span>)) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                        query = QueryFactory.create(<a class="code" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a>+queryString+<span class="stringliteral">&quot; LIMIT 100&quot;</span>);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                }<span class="keywordflow">else</span> {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                        query = QueryFactory.create(<a class="code" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a>+queryString+<span class="stringliteral">&quot; LIMIT 1&quot;</span>);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                System.out.println(<span class="stringliteral">&quot;Starting query execution... &quot;</span>+queryurl);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                QueryExecution qexec = QueryExecutionFactory.sparqlService(queryurl, query);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                qexec.setTimeout(1, TimeUnit.MINUTES);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                ResultSet results = qexec.execSelect();</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                System.out.println(<span class="stringliteral">&quot;Hello&quot;</span>);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                <span class="keywordflow">if</span>(!results.hasNext()) {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                        System.out.println(<span class="stringliteral">&quot;No results!?!&quot;</span>);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                        qexec.close();</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                        <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                System.out.println(<span class="stringliteral">&quot;Executed query... getting results&quot;</span>);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                QuerySolution solu=results.next();</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                Iterator&lt;String&gt; varnames=solu.varNames();</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                System.out.println(solu.get(indvar));</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                <span class="keywordflow">if</span>(solu.get(indvar)!=null) {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                        result=<span class="keyword">new</span> TreeMap&lt;&gt;();</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                        queryString=queryString.replace(<span class="stringliteral">&quot;WHERE{&quot;</span>,<span class="stringliteral">&quot;WHERE{ BIND( &lt;&quot;</span>+solu.get(indvar)+<span class="stringliteral">&quot;&gt; AS ?&quot;</span>+indvar+<span class="stringliteral">&quot;) &quot;</span>);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                        System.out.println(<a class="code" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a>+queryString);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                        qexec.close();</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                        query = QueryFactory.create(<a class="code" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a>+queryString);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                        qexec = QueryExecutionFactory.sparqlService(queryurl, query);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                        results = qexec.execSelect();</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                Map&lt;String,String&gt; rel = <span class="keyword">new</span> TreeMap&lt;String,String&gt;();</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                Map&lt;String,String&gt; val=<span class="keyword">new</span> TreeMap&lt;String,String&gt;();</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                String lat=<span class="stringliteral">&quot;&quot;</span>,lon=<span class="stringliteral">&quot;&quot;</span>,lastInd=<span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                List&lt;String&gt; latlist=<span class="keyword">new</span> LinkedList&lt;String&gt;();</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                List&lt;String&gt; lonlist=<span class="keyword">new</span> LinkedList&lt;String&gt;();</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                Integer attcount=0,nscounter=0;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                result.put(<span class="stringliteral">&quot;namespaces&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                <span class="keywordflow">while</span>(results.hasNext()) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                        solu=results.next();</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                        varnames=solu.varNames();</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                        <span class="keywordflow">if</span>(lastInd.isEmpty()) {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                                <span class="keywordflow">if</span>(!latlist.isEmpty() &amp;&amp; !lonlist.isEmpty()) {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                                        <span class="keywordflow">if</span>(latlist.size()==1 &amp;&amp; lonlist.size()==1) {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                                                result.put(<span class="stringliteral">&quot;http://www.opengis.net/ont/geosparql#asWKT&quot;</span>,<span class="stringliteral">&quot;Point(&quot;</span>+lonlist.get(0)+<span class="stringliteral">&quot; &quot;</span>+latlist.get(0)+<span class="stringliteral">&quot;)&quot;</span>);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                                        }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(latlist.get(latlist.size()-1).equals(latlist.get(0)) &amp;&amp; lonlist.get(lonlist.size()-1).equals(lonlist.get(0))) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                                                StringBuilder builder=<span class="keyword">new</span> StringBuilder();</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                                                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;latlist.size();i++) {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                                                        builder.append(lonlist.get(i)+<span class="stringliteral">&quot; &quot;</span>+latlist.get(i)+<span class="stringliteral">&quot;,&quot;</span>);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                                                }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                                                builder.delete(builder.length()-1,builder.length());</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                                                result.put(<span class="stringliteral">&quot;http://www.opengis.net/ont/geosparql#asWKT&quot;</span>,<span class="stringliteral">&quot;Polygon((&quot;</span>+builder.toString()+<span class="stringliteral">&quot;))&quot;</span>);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                                        }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(!latlist.get(latlist.size()-1).equals(latlist.get(0)) || !lonlist.get(lonlist.size()-1).equals(lonlist.get(0))) {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                                                StringBuilder builder=<span class="keyword">new</span> StringBuilder();</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                                                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;latlist.size();i++) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                                                        builder.append(lonlist.get(i)+<span class="stringliteral">&quot; &quot;</span>+latlist.get(i)+<span class="stringliteral">&quot;,&quot;</span>);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                                                }</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                                                builder.delete(builder.length()-1,builder.length());</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                                                result.put(<span class="stringliteral">&quot;http://www.opengis.net/ont/geosparql#asWKT&quot;</span>,<span class="stringliteral">&quot;LineString((&quot;</span>+builder.toString()+<span class="stringliteral">&quot;))&quot;</span>);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                                        }</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                                        latlist.clear();</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                                        lonlist.clear();</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                                }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                        }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(!lastInd.equals(solu.get(indvar).toString())) {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                        }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                        <span class="keywordflow">while</span>(varnames.hasNext()) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                                String varname=varnames.next();</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                                <span class="keywordflow">if</span>(varname.endsWith(<span class="stringliteral">&quot;_rel&quot;</span>) || varname.equals(<span class="stringliteral">&quot;rel&quot;</span>) || varname.matches(<span class="stringliteral">&quot;rel[0-9]+$&quot;</span>)) {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                                        rel.put(varname,solu.get(varname).toString());</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                                }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(varname.endsWith(<span class="stringliteral">&quot;_val&quot;</span>) || varname.equals(<span class="stringliteral">&quot;val&quot;</span>) || varname.matches(<span class="stringliteral">&quot;val[0-9]+$&quot;</span>)){</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                                        val.put(varname,solu.get(varname).toString());</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                                }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(varname.equals(<span class="stringliteral">&quot;lat&quot;</span>)) {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                                        lat=solu.get(varname).toString();</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                                }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(varname.equals(<span class="stringliteral">&quot;lon&quot;</span>)){</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                                        lon=solu.get(varname).toString();</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                                }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(varname.contains(<span class="stringliteral">&quot;_geom&quot;</span>)){</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                                        <span class="keywordflow">if</span>(!nscache.containsKey(<span class="stringliteral">&quot;http://www.opengis.net/ont/geosparql#&quot;</span>))</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                                                        nscache.put(<span class="stringliteral">&quot;http://www.opengis.net/ont/geosparql#&quot;</span>,<span class="stringliteral">&quot;ns&quot;</span>+nscounter++);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                                        result.put(<span class="stringliteral">&quot;http://www.opengis.net/ont/geosparql#asWKT&quot;</span>,solu.getLiteral(varname).toString());</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                                        <span class="comment">//geomLiteral=solu.getLiteral(varname).toString();</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                                }<span class="keywordflow">else</span> {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                                        String ns=null;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                                        String varval=solu.get(varname).toString();</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                                        <span class="keywordflow">if</span>(varval.contains(<span class="stringliteral">&quot;http&quot;</span>) &amp;&amp; varval.contains(<span class="stringliteral">&quot;#&quot;</span>)) {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                                                ns=varval.substring(0,varval.lastIndexOf(<span class="charliteral">&#39;#&#39;</span>)+1);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                                        }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(varval.contains(<span class="stringliteral">&quot;http&quot;</span>) &amp;&amp; varval.contains(<span class="stringliteral">&quot;/&quot;</span>)) {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                                                ns=varval.substring(0,varval.lastIndexOf(<span class="charliteral">&#39;/&#39;</span>)+1);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                                        }</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                                        <span class="keywordflow">if</span>(ns!=null &amp;&amp; !ns.isEmpty() &amp;&amp; !nscache.containsKey(ns)) {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                                                nscache.put(ns,<span class="stringliteral">&quot;ns&quot;</span>+nscounter++);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                                        }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                                        <span class="keywordflow">try</span> {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                                                String lit=solu.get(varname).toString();</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                                                result.put(varname, lit);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                                        }<span class="keywordflow">catch</span>(Exception e) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                                                e.printStackTrace();</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                                                result.put(varname, varval);    </div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                                        }  </div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                                }</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                        }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                        <span class="keywordflow">if</span>(!lat.isEmpty() &amp;&amp; !lon.isEmpty()) {</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                                String ns=null;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                                <span class="keywordflow">if</span>(lat.contains(<span class="stringliteral">&quot;^^&quot;</span>)) {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                                        ns=lat.substring(lat.lastIndexOf(<span class="stringliteral">&quot;^^&quot;</span>)+2);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                                }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(lat.contains(<span class="stringliteral">&quot;http&quot;</span>) &amp;&amp; lat.contains(<span class="stringliteral">&quot;#&quot;</span>)) {</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                                        ns=lat.substring(0,lat.lastIndexOf(<span class="charliteral">&#39;#&#39;</span>)+1);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                                }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(lat.contains(<span class="stringliteral">&quot;http&quot;</span>) &amp;&amp; lat.contains(<span class="stringliteral">&quot;/&quot;</span>)) {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                                        ns=lat.substring(0,lat.lastIndexOf(<span class="charliteral">&#39;/&#39;</span>)+1);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                                }</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                                <span class="keywordflow">if</span>(ns!=null &amp;&amp; !ns.isEmpty() &amp;&amp; !nscache.containsKey(ns)) {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                                        nscache.put(ns,<span class="stringliteral">&quot;ns&quot;</span>+nscounter++);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                                }       </div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                                <span class="keywordflow">if</span>(lat.contains(<span class="stringliteral">&quot;^^&quot;</span>) &amp;&amp; lon.contains(<span class="stringliteral">&quot;^^&quot;</span>)) {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                                        latlist.add(lat.substring(0,lat.indexOf(<span class="stringliteral">&quot;^^&quot;</span>)));</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                                        lonlist.add(lon.substring(0,lon.indexOf(<span class="stringliteral">&quot;^^&quot;</span>)));</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                                }</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                                lat=<span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                                lon=<span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                        }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                        <span class="keywordflow">if</span>(!rel.isEmpty() &amp;&amp; !val.isEmpty()) {</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                                String ns=null;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                                <span class="keywordtype">int</span> i=0;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                                String attname=<span class="stringliteral">&quot;&quot;</span>,vall=<span class="stringliteral">&quot;&quot;</span>,rell=<span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                                Iterator&lt;String&gt; valit=val.values().iterator();</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                                <span class="keywordflow">while</span>(valit.hasNext()) {</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                                        vall=valit.next();</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                                }</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                                <span class="keywordflow">for</span>(String rl:rel.values()) {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                                        <span class="keywordflow">if</span>(rl.contains(<span class="stringliteral">&quot;http&quot;</span>) &amp;&amp; rl.contains(<span class="stringliteral">&quot;#&quot;</span>)) {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                                                ns=rl.substring(0,rl.lastIndexOf(<span class="charliteral">&#39;#&#39;</span>)+1);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                                                attname+=rl.substring(rl.lastIndexOf(<span class="charliteral">&#39;#&#39;</span>)+1);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                                        }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(rl.contains(<span class="stringliteral">&quot;http&quot;</span>) &amp;&amp; rl.contains(<span class="stringliteral">&quot;/&quot;</span>)) {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                                                ns=rl.substring(0,rl.lastIndexOf(<span class="charliteral">&#39;/&#39;</span>)+1);</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                                                attname+=rl.substring(rl.lastIndexOf(<span class="charliteral">&#39;/&#39;</span>)+1);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                                        }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                                        rell=rl;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                                        <span class="keywordflow">if</span>(ns!=null &amp;&amp; !ns.isEmpty() &amp;&amp; !nscache.containsKey(ns)) {</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                                                nscache.put(ns,<span class="stringliteral">&quot;ns&quot;</span>+nscounter++);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                                        }</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                                        <span class="keywordflow">if</span>(i&lt;(rel.size()-1)) {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                                                attname+=<span class="stringliteral">&quot;.&quot;</span>;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                                        }</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                                        i++;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                                }       </div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                                result.put(rell, vall);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                                rel.clear();</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                                val.clear();</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                        }</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                        attcount++;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                }</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                <span class="keywordflow">if</span>(!latlist.isEmpty() &amp;&amp; !lonlist.isEmpty()) {</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                        <span class="keywordflow">if</span>(latlist.size()==1 &amp;&amp; lonlist.size()==1) {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                                result.put(<span class="stringliteral">&quot;http://www.opengis.net/ont/geosparql#asWKT&quot;</span>,<span class="stringliteral">&quot;Point(&quot;</span>+lonlist.get(0)+<span class="stringliteral">&quot; &quot;</span>+latlist.get(0)+<span class="stringliteral">&quot;)&quot;</span>);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                        }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(latlist.get(latlist.size()-1).equals(latlist.get(0)) &amp;&amp; lonlist.get(lonlist.size()-1).equals(lonlist.get(0))) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                                StringBuilder builder=<span class="keyword">new</span> StringBuilder();</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;latlist.size();i++) {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                                        builder.append(lonlist.get(i)+<span class="stringliteral">&quot; &quot;</span>+latlist.get(i)+<span class="stringliteral">&quot;,&quot;</span>);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                                }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                                builder.delete(builder.length()-1,builder.length());</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                                result.put(<span class="stringliteral">&quot;http://www.opengis.net/ont/geosparql#asWKT&quot;</span>,<span class="stringliteral">&quot;Polygon((&quot;</span>+builder.toString()+<span class="stringliteral">&quot;))&quot;</span>);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                        }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(!latlist.get(latlist.size()-1).equals(latlist.get(0)) || !lonlist.get(lonlist.size()-1).equals(lonlist.get(0))) {</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                                StringBuilder builder=<span class="keyword">new</span> StringBuilder();</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;latlist.size();i++) {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                                        builder.append(lonlist.get(i)+<span class="stringliteral">&quot; &quot;</span>+latlist.get(i)+<span class="stringliteral">&quot;,&quot;</span>);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                                }</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                                builder.delete(builder.length()-1,builder.length());</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                                result.put(<span class="stringliteral">&quot;http://www.opengis.net/ont/geosparql#asWKT&quot;</span>,<span class="stringliteral">&quot;LineString((&quot;</span>+builder.toString()+<span class="stringliteral">&quot;))&quot;</span>);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                        }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                        latlist.clear();</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                        lonlist.clear();</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                }</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                WebService.nameSpaceCache.put(featuretype.toLowerCase(),nscache);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                System.out.println(<span class="stringliteral">&quot;NamespaceCache: &quot;</span>+WebService.nameSpaceCache);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                System.out.println(result);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                workingobj.put(<span class="stringliteral">&quot;attcount&quot;</span>,attcount);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                qexec.close();</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        }</div><div class="ttc" id="a00371_html_aa9472aff15c69cbcf8d5344814f33bed"><div class="ttname"><a href="a00371.html#aa9472aff15c69cbcf8d5344814f33bed">de.hsmainz.cs.semgis.wfs.triplestore.TripleStoreConnector.featureTypes</a></div><div class="ttdeci">static Map&lt; String, Map&lt; String, String &gt; &gt; featureTypes</div><div class="ttdef"><b>Definition:</b> TripleStoreConnector.java:56</div></div>
<div class="ttc" id="a00371_html_a9181599cfb112592f667d6161a33e4e8"><div class="ttname"><a href="a00371.html#a9181599cfb112592f667d6161a33e4e8">de.hsmainz.cs.semgis.wfs.triplestore.TripleStoreConnector.prefixCollection</a></div><div class="ttdeci">static String prefixCollection</div><div class="ttdef"><b>Definition:</b> TripleStoreConnector.java:36</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9bf75e954d3c1636676c3144d61f0fa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bf75e954d3c1636676c3144d61f0fa1">&#9670;&nbsp;</a></span>getMetaData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static String getMetaData </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>queryString</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>queryurl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>featuretype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JSONObject&#160;</td>
          <td class="paramname"><em>workingobject</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                                                                                                         {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                queryString=<span class="stringliteral">&quot;SELECT ?pointstyle ?linestringstyle ?polygonstyle WHERE { &lt;&quot;</span>+featuretype+<span class="stringliteral">&quot;&gt; semgis:hasStyle ?style . ?style semgis:hasPointStyle ?pointstyle . ?style semgis:hasPointStyle ?linestringstyle . ?style semgis:hasPointStyle ?polygonstyle . }&quot;</span>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                Query query = QueryFactory.create(<a class="code" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a>+queryString+<span class="stringliteral">&quot; LIMIT 1&quot;</span>);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                QueryExecution qexec = QueryExecutionFactory.sparqlService(queryurl, query);    </div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                ResultSet results = qexec.execSelect();</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                qexec.close();</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        }</div><div class="ttc" id="a00371_html_a9181599cfb112592f667d6161a33e4e8"><div class="ttname"><a href="a00371.html#a9181599cfb112592f667d6161a33e4e8">de.hsmainz.cs.semgis.wfs.triplestore.TripleStoreConnector.prefixCollection</a></div><div class="ttdeci">static String prefixCollection</div><div class="ttdef"><b>Definition:</b> TripleStoreConnector.java:36</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6c343e8a26797699dd7ea7bf50e34f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6c343e8a26797699dd7ea7bf50e34f6">&#9670;&nbsp;</a></span>getPropertiesByClass()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Map&lt;String,String&gt; getPropertiesByClass </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>triplestoreurl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>classs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="a00403.html#a752e540626abf3b9e94bbefd40ea3d44">WebService.getPropertiesByClass()</a>.</p>
<div class="fragment"><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                                                                                                  {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                Map&lt;String,String&gt; result=<span class="keyword">new</span> TreeMap&lt;String,String&gt;();</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                Query query = QueryFactory.create(<a class="code" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a>+<span class="stringliteral">&quot; SELECT DISTINCT ?rel ?label WHERE { ?item rdf:type &lt;&quot;</span>+classs+<span class="stringliteral">&quot;&gt; . ?item ?rel ?val . OPTIONAL { ?rel rdfs:label ?label . } } &quot;</span>);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                QueryExecution qexec = QueryExecutionFactory.sparqlService(triplestoreurl, query);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                ResultSet resformat=qexec.execSelect();</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                <span class="keywordflow">while</span>(resformat.hasNext()) {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                        QuerySolution res = resformat.next();</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                        <span class="keywordflow">if</span>(res.get(<span class="stringliteral">&quot;label&quot;</span>)!=null) {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                                result.put(res.get(<span class="stringliteral">&quot;rel&quot;</span>).toString(),res.get(<span class="stringliteral">&quot;label&quot;</span>).toString());</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                        }<span class="keywordflow">else</span> {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                                result.put(res.get(<span class="stringliteral">&quot;rel&quot;</span>).toString(),res.get(<span class="stringliteral">&quot;rel&quot;</span>).toString().substring(res.get(<span class="stringliteral">&quot;rel&quot;</span>).toString().lastIndexOf(<span class="charliteral">&#39;/&#39;</span>)+1));</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                        }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                        </div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                qexec.close();</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        }</div><div class="ttc" id="a00371_html_a9181599cfb112592f667d6161a33e4e8"><div class="ttname"><a href="a00371.html#a9181599cfb112592f667d6161a33e4e8">de.hsmainz.cs.semgis.wfs.triplestore.TripleStoreConnector.prefixCollection</a></div><div class="ttdeci">static String prefixCollection</div><div class="ttdef"><b>Definition:</b> TripleStoreConnector.java:36</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4f1a6d9121adfeab3946427c75995e12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f1a6d9121adfeab3946427c75995e12">&#9670;&nbsp;</a></span>getPropertyFromMapping()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static String getPropertyFromMapping </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>typename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>propertyname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="a00403.html#aac6cc225f89d757e0034110b178ac276">WebService.featureTypeCache</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00371.html#afd6ff0e4855627212cb2e26e7575255c">TripleStoreConnector.CQLfilterStringToSPARQLQuery()</a>.</p>
<div class="fragment"><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                                                                                         {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                <span class="keywordflow">for</span>(String key:WebService.featureTypeCache.get(<span class="keyword">typename</span>.toLowerCase()).keySet()) {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                        <span class="keywordflow">if</span>(key.contains(propertyname)) {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                                propertyname=key;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                                <span class="keywordflow">return</span> key;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                        }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        }</div></div><!-- fragment -->
</div>
</div>
<a id="aef725dfee0f51e6220a91217779f1b26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef725dfee0f51e6220a91217779f1b26">&#9670;&nbsp;</a></span>getStyle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="a00367.html">StyleObject</a> getStyle </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>featuretype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>stylename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>triplestore</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>namespace</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="a00367.html#ab280196b35e8fb195755480f7b6bba1c">StyleObject.hatch</a>, <a class="el" href="a00367.html#ac5ffd3d17c1fd4d95bdf3423d8d95102">StyleObject.lineStringImage</a>, <a class="el" href="a00367.html#a124c238dd7f1a8e8b30588868bf3f809">StyleObject.lineStringImageStyle</a>, <a class="el" href="a00367.html#ae1748922a6f7b626b0c88fcd21f48392">StyleObject.lineStringStyle</a>, <a class="el" href="a00367.html#a5d0c401b8996e35a911e178227081b32">StyleObject.pointImage</a>, <a class="el" href="a00367.html#a87e7ed2ad089c7ba8db7857efa15befa">StyleObject.pointStyle</a>, <a class="el" href="a00367.html#a3877196bb534272431a59e7ecb4d5338">StyleObject.polygonImage</a>, <a class="el" href="a00367.html#a27511b5779d69b4e26b4ed7737d5de2e">StyleObject.polygonStyle</a>, <a class="el" href="a00403.html#adae526bd90688be0803d1ae1e6b9c1d1">WebService.styleCache</a>, and <a class="el" href="a00367.html#ac1612ef6d046b45bf698d7c2c284e0ca">StyleObject.styleName</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00371.html#af7e48b08433ea6820366dfcd55fec444">TripleStoreConnector.executeQuery()</a>, and <a class="el" href="a00403.html#a2c73b011030643910ee6e527d2144279">WebService.getCollectionStyle()</a>.</p>
<div class="fragment"><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                                                                                                                    {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                <span class="keywordflow">if</span>(WebService.styleCache.containsKey(triplestore) &amp;&amp; WebService.styleCache.get(triplestore).containsKey(stylename)) {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                        <span class="keywordflow">return</span> WebService.styleCache.get(triplestore).get(stylename);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                String queryString=<span class="stringliteral">&quot;SELECT ?style ?styleLabel ?pointStyle ?pointImage ?hatch ?linestringStyle ?linestringImage ?linestringImageStyle ?polygonStyle ?polygonImage WHERE { &quot;</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            +<span class="stringliteral">&quot; OPTIONAL {&lt;&quot;</span>+<span class="keyword">namespace</span>+stylename+<span class="stringliteral">&quot;&gt; rdfs:label ?styleLabel .}&quot;</span>+System.lineSeparator()</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                +<span class="stringliteral">&quot; OPTIONAL {&lt;&quot;</span>+<span class="keyword">namespace</span>+stylename+<span class="stringliteral">&quot;&gt; semgis:linestringImage ?linestringImage .} &quot;</span>+System.lineSeparator()</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                +<span class="stringliteral">&quot; OPTIONAL {&lt;&quot;</span>+<span class="keyword">namespace</span>+stylename+<span class="stringliteral">&quot;&gt; semgis:linestringImageStyle ?linestringImageStyle .} &quot;</span>+System.lineSeparator()</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                +<span class="stringliteral">&quot; OPTIONAL {&lt;&quot;</span>+<span class="keyword">namespace</span>+stylename+<span class="stringliteral">&quot;&gt; semgis:hatch ?hatch .}&quot;</span>+System.lineSeparator()</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                +<span class="stringliteral">&quot; OPTIONAL {&lt;&quot;</span>+<span class="keyword">namespace</span>+stylename+<span class="stringliteral">&quot;&gt; semgis:image ?pointImage .}&quot;</span>+System.lineSeparator()</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                +<span class="stringliteral">&quot; OPTIONAL {&lt;&quot;</span>+<span class="keyword">namespace</span>+stylename+<span class="stringliteral">&quot;&gt; semgis:imageStyle ?pointStyle .}&quot;</span>+System.lineSeparator()</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                +<span class="stringliteral">&quot; OPTIONAL {&lt;&quot;</span>+<span class="keyword">namespace</span>+stylename+<span class="stringliteral">&quot;&gt; semgis:linestringStyle ?linestringStyle .}&quot;</span>+System.lineSeparator()</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                +<span class="stringliteral">&quot; OPTIONAL {&lt;&quot;</span>+<span class="keyword">namespace</span>+stylename+<span class="stringliteral">&quot;&gt; semgis:polygonStyle ?polygonStyle .}&quot;</span>+System.lineSeparator()</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                +<span class="stringliteral">&quot; OPTIONAL {&lt;&quot;</span>+<span class="keyword">namespace</span>+stylename+<span class="stringliteral">&quot;&gt; semgis:polygonImage ?polygonImage .}&quot;</span>+System.lineSeparator()+<span class="stringliteral">&quot; }&quot;</span>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                System.out.println(queryString);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                Query query = QueryFactory.create(<a class="code" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a>+queryString+<span class="stringliteral">&quot; LIMIT 1&quot;</span>);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                QueryExecution qexec = QueryExecutionFactory.sparqlService(triplestore, query); </div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                ResultSet results = qexec.execSelect();</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                System.out.println(<span class="stringliteral">&quot;Style Query finished!&quot;</span>);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                StyleObject result=null;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                <span class="keywordflow">if</span>(results.hasNext()) {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                        result=<span class="keyword">new</span> StyleObject();</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                        QuerySolution solu=results.next();</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                        result.styleName=stylename;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                        result.pointStyle=solu.get(<span class="stringliteral">&quot;pointStyle&quot;</span>)!=null?solu.get(<span class="stringliteral">&quot;pointStyle&quot;</span>).toString():null;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                        result.pointImage=solu.get(<span class="stringliteral">&quot;pointImage&quot;</span>)!=null?solu.get(<span class="stringliteral">&quot;pointImage&quot;</span>).toString():null;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                        result.lineStringImage=solu.get(<span class="stringliteral">&quot;linestringImage&quot;</span>)!=null?solu.get(<span class="stringliteral">&quot;linestringImage&quot;</span>).toString():null;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                        result.lineStringImageStyle=solu.get(<span class="stringliteral">&quot;linestringImageStyle&quot;</span>)!=null?solu.get(<span class="stringliteral">&quot;linestringImageStyle&quot;</span>).toString():null;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                        result.lineStringStyle=solu.get(<span class="stringliteral">&quot;linestringStyle&quot;</span>)!=null?solu.get(<span class="stringliteral">&quot;linestringStyle&quot;</span>).toString():null;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                        result.polygonStyle=solu.get(<span class="stringliteral">&quot;polygonStyle&quot;</span>)!=null?solu.get(<span class="stringliteral">&quot;polygonStyle&quot;</span>).toString():null;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                        result.polygonImage=solu.get(<span class="stringliteral">&quot;polygonImage&quot;</span>)!=null?solu.get(<span class="stringliteral">&quot;polygonImage&quot;</span>).toString():null;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                        result.hatch=solu.get(<span class="stringliteral">&quot;hatch&quot;</span>)!=null?solu.get(<span class="stringliteral">&quot;hatch&quot;</span>).toString():null;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                        <span class="keywordflow">if</span>(!WebService.styleCache.containsKey(triplestore)) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                                WebService.styleCache.put(triplestore,<span class="keyword">new</span> TreeMap&lt;&gt;());</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                        }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                        WebService.styleCache.get(triplestore).put(stylename,result);                   </div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                qexec.close();</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        }</div><div class="ttc" id="a00371_html_a9181599cfb112592f667d6161a33e4e8"><div class="ttname"><a href="a00371.html#a9181599cfb112592f667d6161a33e4e8">de.hsmainz.cs.semgis.wfs.triplestore.TripleStoreConnector.prefixCollection</a></div><div class="ttdeci">static String prefixCollection</div><div class="ttdef"><b>Definition:</b> TripleStoreConnector.java:36</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d4d9167bb25799fda9197c3be4f30d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d4d9167bb25799fda9197c3be4f30d4">&#9670;&nbsp;</a></span>getStyleNames()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static String getStyleNames </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>baseurl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JSONObject&#160;</td>
          <td class="paramname"><em>workingobject</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>format</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="a00403.html#a98a8169189e3dc0061bc5f6338d8a6e0">WebService.getCollectionStyles()</a>, and <a class="el" href="a00403.html#ae52a932fac3aaf398d86fafc31269f30">WebService.queryables()</a>.</p>
<div class="fragment"><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                                                                                                  {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                String queryString=<span class="stringliteral">&quot;SELECT ?style ?styleLabel ?pointstyle ?linestringstyle ?polygonstyle WHERE { &lt;&quot;</span>+workingobject.getString(<span class="stringliteral">&quot;class&quot;</span>)+<span class="stringliteral">&quot;&gt; owl:equivalentClass ?equivclass .&quot;</span>+System.lineSeparator()+<span class="stringliteral">&quot; ?equivclass owl:intersectionOf ?intersect .&quot;</span>+System.lineSeparator()+<span class="stringliteral">&quot; ?intersect rdf:rest ?rest.&quot;</span>+System.lineSeparator()+<span class="stringliteral">&quot; ?rest rdf:first ?first .&quot;</span>+System.lineSeparator()+<span class="stringliteral">&quot; ?first owl:allValuesFrom ?styleclass .&quot;</span>+System.lineSeparator()+<span class="stringliteral">&quot; ?style rdf:type ?styleclass.&quot;</span>+System.lineSeparator()+<span class="stringliteral">&quot; OPTIONAL{?style rdfs:label ?styleLabel .} }&quot;</span>;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                Query query = QueryFactory.create(<a class="code" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a>+queryString+<span class="stringliteral">&quot; LIMIT 1&quot;</span>);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                System.out.println(queryString);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                QueryExecution qexec = QueryExecutionFactory.sparqlService(workingobject.getString(<span class="stringliteral">&quot;triplestore&quot;</span>), query);      </div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                ResultSet results = qexec.execSelect();</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                String result=<span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                <span class="keywordflow">if</span>(<span class="stringliteral">&quot;json&quot;</span>.equals(format)) {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                        JSONObject resultjson=<span class="keyword">new</span> JSONObject();</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                        resultjson.put(<span class="stringliteral">&quot;styles&quot;</span>,<span class="keyword">new</span> JSONArray());</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                        <span class="keywordflow">while</span>(results.hasNext()) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                                JSONObject style=<span class="keyword">new</span> JSONObject();</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                                QuerySolution curresult = results.next();</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                                style.put(<span class="stringliteral">&quot;uri&quot;</span>,curresult.get(<span class="stringliteral">&quot;style&quot;</span>));</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                                style.put(<span class="stringliteral">&quot;name&quot;</span>,curresult.get(<span class="stringliteral">&quot;style&quot;</span>).toString().substring(curresult.get(<span class="stringliteral">&quot;style&quot;</span>).toString().indexOf(<span class="stringliteral">&quot;#&quot;</span>)+1));</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                                resultjson.getJSONArray(<span class="stringliteral">&quot;styles&quot;</span>).put(style);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                        }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                        result=resultjson.toString(2);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(<span class="stringliteral">&quot;html&quot;</span>.equals(format)) {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                        result=<span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                        result+=<span class="stringliteral">&quot;&lt;table border=1&gt;&lt;tr&gt;&lt;th&gt;Stylename&lt;/th&gt;&lt;th&gt;Styletest&lt;/th&gt;&lt;/tr&gt;&quot;</span>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                        <span class="keywordflow">while</span>(results.hasNext()) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                QuerySolution curresult = results.next();</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                                result+=<span class="stringliteral">&quot;&lt;tr&gt;&lt;td&gt;&lt;a href=\&quot;&quot;</span>+curresult.get(<span class="stringliteral">&quot;style&quot;</span>)+<span class="stringliteral">&quot;\&quot;&gt;&quot;</span>+curresult.get(<span class="stringliteral">&quot;style&quot;</span>).toString()</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                                .substring(curresult.get(<span class="stringliteral">&quot;style&quot;</span>).toString().indexOf(<span class="stringliteral">&quot;#&quot;</span>)+1)+<span class="stringliteral">&quot;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=\&quot;&quot;</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                +baseurl+<span class="stringliteral">&quot;/collections/&quot;</span>+workingobject.getString(<span class="stringliteral">&quot;name&quot;</span>)+<span class="stringliteral">&quot;/items?f=html&amp;style=&quot;</span>+curresult.get(<span class="stringliteral">&quot;style&quot;</span>).toString()</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                                .substring(curresult.get(<span class="stringliteral">&quot;style&quot;</span>).toString().indexOf(<span class="stringliteral">&quot;#&quot;</span>)+1)+<span class="stringliteral">&quot;\&quot;&gt;View&lt;/a&gt;&lt;/tr&gt;&quot;</span>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                        }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                        result+=<span class="stringliteral">&quot;&lt;/table&gt;&quot;</span>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                }<span class="keywordflow">else</span> {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                        result=<span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;&lt;styles&gt;&quot;</span>+System.lineSeparator();</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                        <span class="keywordflow">while</span>(results.hasNext()) {</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                                QuerySolution curresult = results.next();</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                                result+=<span class="stringliteral">&quot;&lt;style uri=\&quot;&quot;</span>+curresult.get(<span class="stringliteral">&quot;style&quot;</span>)+<span class="stringliteral">&quot;\&quot;&gt;&quot;</span>+curresult.get(<span class="stringliteral">&quot;style&quot;</span>).toString().substring(curresult.get(<span class="stringliteral">&quot;style&quot;</span>).toString().indexOf(<span class="stringliteral">&quot;#&quot;</span>)+1)+<span class="stringliteral">&quot;&lt;/style&gt;&quot;</span>+System.lineSeparator();</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                        }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                        result+=<span class="stringliteral">&quot;&lt;/styles&gt;&quot;</span>+System.lineSeparator();</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                }</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                qexec.close();</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        }</div><div class="ttc" id="a00371_html_a9181599cfb112592f667d6161a33e4e8"><div class="ttname"><a href="a00371.html#a9181599cfb112592f667d6161a33e4e8">de.hsmainz.cs.semgis.wfs.triplestore.TripleStoreConnector.prefixCollection</a></div><div class="ttdeci">static String prefixCollection</div><div class="ttdef"><b>Definition:</b> TripleStoreConnector.java:36</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aff053b6ba7ef89c25b3593a90e0635cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff053b6ba7ef89c25b3593a90e0635cd">&#9670;&nbsp;</a></span>getTemporalExtentFromTripleStoreData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static String getTemporalExtentFromTripleStoreData </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>triplestore</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>queryString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                                                                                                         {</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                Query query = QueryFactory.create(<a class="code" href="a00371.html#a9181599cfb112592f667d6161a33e4e8">prefixCollection</a>+queryString);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                QueryExecution qexec = QueryExecutionFactory.sparqlService(triplestore, query);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                ResultSet results = qexec.execSelect();</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                <span class="keywordflow">while</span>(results.hasNext()) {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                        QuerySolution solu=results.next();</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                        String wktLiteral=solu.get(<span class="stringliteral">&quot;the_geom&quot;</span>).toString();</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                        </div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                qexec.close();</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        }</div><div class="ttc" id="a00371_html_a9181599cfb112592f667d6161a33e4e8"><div class="ttname"><a href="a00371.html#a9181599cfb112592f667d6161a33e4e8">de.hsmainz.cs.semgis.wfs.triplestore.TripleStoreConnector.prefixCollection</a></div><div class="ttdeci">static String prefixCollection</div><div class="ttdef"><b>Definition:</b> TripleStoreConnector.java:36</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b260eecbaabcef8473fd87ada040682"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b260eecbaabcef8473fd87ada040682">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void main </td>
          <td>(</td>
          <td class="paramtype">String []&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="a00371.html#a723f01dec66e801f28fd03351a36c0ad">TripleStoreConnector.getBoundingBoxFromTripleStoreData()</a>.</p>
<div class="fragment"><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                                               {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                <span class="comment">//System.out.println(CQLfilterStringToSPARQLQuery(&quot;abc=4 AND DISJOINT(the_geom, POLYGON((-90 40, -90 45, -60 45, -60 40, -90 40)))&quot;,&quot;namedplace&quot;));</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                System.out.println(<a class="code" href="a00371.html#a723f01dec66e801f28fd03351a36c0ad">getBoundingBoxFromTripleStoreData</a>(<span class="stringliteral">&quot;https://query.wikidata.org/sparql&quot;</span>, <span class="stringliteral">&quot;SELECT ?wikidatacity ?wikidatacityLabel ?the_geom WHERE{ ?wikidatacity wdt:P31 wd:Q515 . ?wikidatacity wdt:P625 ?the_geom . SERVICE wikibase:label { bd:serviceParam wikibase:language &#39;[AUTO_LANGUAGE],en&#39;. } }&quot;</span>));</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        }</div><div class="ttc" id="a00371_html_a723f01dec66e801f28fd03351a36c0ad"><div class="ttname"><a href="a00371.html#a723f01dec66e801f28fd03351a36c0ad">de.hsmainz.cs.semgis.wfs.triplestore.TripleStoreConnector.getBoundingBoxFromTripleStoreData</a></div><div class="ttdeci">static Double [] getBoundingBoxFromTripleStoreData(String triplestore, String queryString)</div><div class="ttdef"><b>Definition:</b> TripleStoreConnector.java:58</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a68992f1d27be6c66985df6cb7183800c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68992f1d27be6c66985df6cb7183800c">&#9670;&nbsp;</a></span>binaryOperators</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Pattern binaryOperators =Pattern.compile(&quot;.*(&lt;|&gt;|=|&lt;=|&gt;=|&lt;&gt;).*&quot;,Pattern.CASE_INSENSITIVE)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">package</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa9472aff15c69cbcf8d5344814f33bed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9472aff15c69cbcf8d5344814f33bed">&#9670;&nbsp;</a></span>featureTypes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Map&lt;String,Map&lt;String,String&gt; &gt; featureTypes =new TreeMap&lt;&gt;()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9181599cfb112592f667d6161a33e4e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9181599cfb112592f667d6161a33e4e8">&#9670;&nbsp;</a></span>prefixCollection</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String prefixCollection =&quot;&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="a00403.html#a88724b837ed6ce278eccca40f2f6f87b">WebService.prefixes()</a>.</p>

</div>
</div>
<a id="a05ea88578bcfbbeee7a9945d156c94d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05ea88578bcfbbeee7a9945d156c94d0">&#9670;&nbsp;</a></span>resultSetSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Integer resultSetSize =0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">package</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa96e328cd8a62fc12bb0cee0a3820dad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa96e328cd8a62fc12bb0cee0a3820dad">&#9670;&nbsp;</a></span>spatialFunctions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Pattern spatialFunctions =Pattern.compile(&quot;.*(equals|disjoint|intersects|touches|crosses|within|contains|overlaps|dwithin).*&quot;,Pattern.CASE_INSENSITIVE)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">package</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00168.html">de</a></li><li class="navelem"><a class="el" href="a00169.html">hsmainz</a></li><li class="navelem"><a class="el" href="a00170.html">cs</a></li><li class="navelem"><a class="el" href="a00171.html">semgis</a></li><li class="navelem"><a class="el" href="a00172.html">wfs</a></li><li class="navelem"><a class="el" href="a00176.html">triplestore</a></li><li class="navelem"><a class="el" href="a00371.html">TripleStoreConnector</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
